{
    "pipes": [],
    "interfaces": [
        {
            "name": "DailyForecast",
            "id": "interface-DailyForecast-bcbe1430a6d0afe15ecb713649060156344daba3f2f565796dd78da0f6fc50cadf28ab9e3a0816c42978729d5de8669453cfcbbc3237da3cc534d0a52fdd582e",
            "file": "src/stories/weather-widget/weather.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\n\nexport interface WeatherResponse {\n  location: string;\n  temperature: number;\n  condition: string;\n  description: string;\n  humidity: number;\n  windSpeed: number;\n  icon: string;\n  feelsLike: number;\n  pressure: number;\n  visibility: number;\n  sunrise: number;\n  sunset: number;\n  forecast?: DailyForecast[];\n}\n\nexport interface DailyForecast {\n  date: string;\n  tempMax: number;\n  tempMin: number;\n  condition: string;\n  icon: string;\n  humidity: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WeatherService {\n  // Base URLs when using proxy vs direct calls\n  private readonly PROXY_BASE_URL = '/api/data/2.5';\n  private readonly DEFAULT_BASE_URL = 'https://api.openweathermap.org/data/2.5';\n\n  private readonly apiKey = environment.weatherApi?.key?.trim() ?? '';\n  private readonly useProxy = environment.useProxy === true;\n  private readonly corsProxy = environment.corsProxy?.trim() ?? '';\n  private readonly configuredBaseUrl = environment.weatherApi?.baseUrl?.trim() ?? this.DEFAULT_BASE_URL;\n\n  constructor(private http: HttpClient) {}\n\n  /**\n   * Get weather data by city name\n   */\n  getWeatherByCity(city: string, units: 'metric' | 'imperial' = 'imperial'): Observable<WeatherResponse> {\n    if (!this.isApiKeyConfigured()) {\n      return throwError(() => new Error('Weather API key is not configured. Please update environment.weatherApi.key.'));\n    }\n\n    const url = this.buildApiUrl('/weather', {\n      q: city,\n      units,\n      appid: this.apiKey\n    });\n\n    return this.http.get<any>(url).pipe(\n      map(data => this.transformWeatherData(data, units)),\n      catchError(this.handleError)\n    );\n  }\n\n  /**\n   * Get weather data by coordinates\n   */\n  getWeatherByCoordinates(lat: number, lon: number, units: 'metric' | 'imperial' = 'imperial'): Observable<WeatherResponse> {\n    if (!this.isApiKeyConfigured()) {\n      return throwError(() => new Error('Weather API key is not configured. Please update environment.weatherApi.key.'));\n    }\n\n    const url = this.buildApiUrl('/weather', {\n      lat,\n      lon,\n      units,\n      appid: this.apiKey\n    });\n\n    return this.http.get<any>(url).pipe(\n      map(data => this.transformWeatherData(data, units)),\n      catchError(this.handleError)\n    );\n  }\n\n  /**\n   * Get 5-day weather forecast\n   */\n  getForecast(city: string, units: 'metric' | 'imperial' = 'imperial'): Observable<DailyForecast[]> {\n    if (!this.isApiKeyConfigured()) {\n      return throwError(() => new Error('Weather API key is not configured. Please update environment.weatherApi.key.'));\n    }\n\n    const url = this.buildApiUrl('/forecast', {\n      q: city,\n      units,\n      appid: this.apiKey\n    });\n\n    return this.http.get<any>(url).pipe(\n      map(data => this.transformForecastData(data)),\n      catchError(this.handleError)\n    );\n  }\n\n  /**\n   * Get current position using browser geolocation\n   */\n  getCurrentPosition(): Promise<GeolocationCoordinates> {\n    return new Promise((resolve, reject) => {\n      if (!navigator.geolocation) {\n        reject(new Error('Geolocation is not supported by your browser'));\n      } else {\n        navigator.geolocation.getCurrentPosition(\n          position => resolve(position.coords),\n          error => reject(error)\n        );\n      }\n    });\n  }\n\n  /**\n   * Transform OpenWeatherMap API response to our WeatherResponse format\n   */\n  private transformWeatherData(data: any, units: string): WeatherResponse {\n    // Validate required data exists\n    if (!data || !data.main || !data.weather || !data.weather[0] || !data.wind || !data.sys) {\n      throw new Error('Invalid API response structure');\n    }\n\n    return {\n      location: `${data.name || 'Unknown'}${data.sys?.country ? ', ' + data.sys.country : ''}`,\n      temperature: Math.round(data.main.temp),\n      condition: data.weather[0].main,\n      description: data.weather[0].description,\n      humidity: data.main.humidity,\n      windSpeed: Math.round(data.wind.speed),\n      icon: this.getWeatherIcon(data.weather[0].id, data.weather[0].icon),\n      feelsLike: Math.round(data.main.feels_like),\n      pressure: data.main.pressure,\n      visibility: data.visibility || 0,\n      sunrise: data.sys.sunrise || 0,\n      sunset: data.sys.sunset || 0\n    };\n  }\n\n  /**\n   * Transform forecast data\n   */\n  private transformForecastData(data: any): DailyForecast[] {\n    if (!data || !Array.isArray(data.list)) {\n      throw new Error('Invalid forecast API response structure');\n    }\n\n    const dailyData: { [key: string]: any[] } = {};\n\n    // Group forecasts by day\n    data.list.forEach((item: any) => {\n      const date = new Date(item.dt * 1000).toISOString().split('T')[0];\n      if (!dailyData[date]) {\n        dailyData[date] = [];\n      }\n      dailyData[date].push(item);\n    });\n\n    // Get daily summary (first 5 days)\n    return Object.entries(dailyData).slice(0, 5).map(([date, items]) => {\n      const temps = items.map(item => item.main.temp);\n      const mainItem = items[Math.floor(items.length / 2)]; // Use midday data\n\n      return {\n        date,\n        tempMax: Math.round(Math.max(...temps)),\n        tempMin: Math.round(Math.min(...temps)),\n        condition: mainItem.weather[0].main,\n        icon: this.getWeatherIcon(mainItem.weather[0].id, mainItem.weather[0].icon),\n        humidity: mainItem.main.humidity\n      };\n    });\n  }\n\n  /**\n   * Map OpenWeatherMap weather codes to emoji icons\n   * Weather condition codes: https://openweathermap.org/weather-conditions\n   */\n  private getWeatherIcon(weatherId: number, iconCode: string): string {\n    // Check if it's night time (icon code ends with 'n')\n    const isNight = iconCode.endsWith('n');\n\n    if (weatherId >= 200 && weatherId < 300) {\n      return '‚õàÔ∏è'; // Thunderstorm\n    } else if (weatherId >= 300 && weatherId < 400) {\n      return 'üå¶Ô∏è'; // Drizzle\n    } else if (weatherId >= 500 && weatherId < 600) {\n      return 'üåßÔ∏è'; // Rain\n    } else if (weatherId >= 600 && weatherId < 700) {\n      return '‚ùÑÔ∏è'; // Snow\n    } else if (weatherId >= 700 && weatherId < 800) {\n      return 'üå´Ô∏è'; // Atmosphere (mist, fog, etc.)\n    } else if (weatherId === 800) {\n      return isNight ? 'üåô' : '‚òÄÔ∏è'; // Clear\n    } else if (weatherId === 801) {\n      return isNight ? '‚òÅÔ∏è' : '‚õÖ'; // Few clouds\n    } else if (weatherId > 801) {\n      return '‚òÅÔ∏è'; // Cloudy\n    }\n\n    return '‚õÖ'; // Default\n  }\n\n  /**\n   * Handle HTTP errors\n   */\n  private handleError(error: any): Observable<never> {\n    let errorMessage = 'An error occurred while fetching weather data';\n\n    if (error.error instanceof ErrorEvent) {\n      // Client-side error\n      errorMessage = `Error: ${error.error.message}`;\n    } else if (error.status) {\n      // Server-side error\n      switch (error.status) {\n        case 401:\n          errorMessage = 'Invalid API key';\n          break;\n        case 404:\n          errorMessage = 'City not found';\n          break;\n        case 429:\n          errorMessage = 'API rate limit exceeded';\n          break;\n        default:\n          errorMessage = `Error: ${error.message}`;\n      }\n    }\n\n    console.error('Weather API Error:', error);\n    return throwError(() => new Error(errorMessage));\n  }\n\n  /**\n   * Build the API URL depending on proxy/cors configuration\n   */\n  private buildApiUrl(endpoint: string, params: Record<string, string | number>): string {\n    const base = this.useProxy ? this.PROXY_BASE_URL : this.configuredBaseUrl;\n    const normalizedBase = base.endsWith('/') ? base.slice(0, -1) : base;\n    const normalizedEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\n\n    const urlParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      urlParams.set(key, String(value));\n    });\n\n    const apiUrl = `${normalizedBase}${normalizedEndpoint}?${urlParams.toString()}`;\n\n    if (this.useProxy || !this.corsProxy) {\n      return apiUrl;\n    }\n\n    // When not using proxy, optionally prepend configured CORS proxy\n    if (this.corsProxy.includes('{url}')) {\n      return this.corsProxy.replace('{url}', encodeURIComponent(apiUrl));\n    }\n\n    const shouldEncode = this.corsProxy.endsWith('=') || this.corsProxy.includes('?url=');\n    return shouldEncode\n      ? `${this.corsProxy}${encodeURIComponent(apiUrl)}`\n      : `${this.corsProxy}${apiUrl}`;\n  }\n\n  private isApiKeyConfigured(): boolean {\n    return !!this.apiKey && this.apiKey !== 'YOUR_OPENWEATHERMAP_API_KEY';\n  }\n}\n",
            "properties": [
                {
                    "name": "condition",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 27
                },
                {
                    "name": "date",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 24
                },
                {
                    "name": "humidity",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 29
                },
                {
                    "name": "icon",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 28
                },
                {
                    "name": "tempMax",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 25
                },
                {
                    "name": "tempMin",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 26
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "User",
            "id": "interface-User-d4821beac0e4a852e513391b7470981c4353fdd95a18628bb68136c8695b489ee15b926e2e5031bc26cf30e1508e0a362c3ee13a06734702b4d15af140e485d5",
            "file": "src/stories/header/user.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "export interface User {\n  name: string;\n}\n",
            "properties": [
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "WeatherData",
            "id": "interface-WeatherData-fc0a4dcf6eac2139c87a1d55577cfac18a40b39b3ff4346f2e2a0642057135eb13a7809cb7a6a9401038588e9d7b46a1de9f08122fd7a0f1db504f539add65aa",
            "file": "src/stories/weather-widget/weather-widget.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { CommonModule } from '@angular/common';\nimport { Component, Input, OnInit, inject } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { WeatherService, WeatherResponse } from './weather.service';\n\nexport interface WeatherData {\n  location: string;\n  temperature: number;\n  condition: string;\n  humidity: number;\n  windSpeed: number;\n  icon: string;\n}\n\n@Component({\n  selector: 'weather-widget',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  providers: [WeatherService],\n  template: `\n    <div class=\"weather-widget\" [ngClass]=\"themeClass\">\n      <!-- Search Bar -->\n      <div class=\"weather-search\" *ngIf=\"enableSearch\">\n        <input\n          type=\"text\"\n          [(ngModel)]=\"searchCity\"\n          (keyup.enter)=\"searchWeather()\"\n          placeholder=\"Enter city name...\"\n          class=\"search-input\"\n        />\n        <button (click)=\"searchWeather()\" class=\"search-button\">üîç</button>\n        <button (click)=\"getCurrentLocationWeather()\" class=\"location-button\" title=\"Use my location\">üìç</button>\n      </div>\n\n      <!-- Loading State -->\n      <div *ngIf=\"loading\" class=\"weather-loading\">\n        <div class=\"spinner\"></div>\n        <p>Loading weather data...</p>\n      </div>\n\n      <!-- Error State -->\n      <div *ngIf=\"error && !loading\" class=\"weather-error\">\n        <span class=\"error-icon\">‚ö†Ô∏è</span>\n        <p>{{ error }}</p>\n        <button (click)=\"retry()\" class=\"retry-button\">Try Again</button>\n      </div>\n\n      <!-- Weather Content -->\n      <div *ngIf=\"!loading && !error\" class=\"weather-content\">\n        <div class=\"weather-header\">\n          <h2 class=\"location\">{{ weatherData.location }}</h2>\n          <span class=\"date\">{{ currentDate }}</span>\n        </div>\n\n        <div class=\"weather-main\">\n          <div class=\"weather-icon\">{{ weatherData.icon }}</div>\n          <div class=\"temperature\">{{ weatherData.temperature }}¬∞{{ unit }}</div>\n        </div>\n\n        <div class=\"weather-condition\">{{ weatherData.condition }}</div>\n\n        <div class=\"weather-details\">\n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Humidity</span>\n            <span class=\"detail-value\">{{ weatherData.humidity }}%</span>\n          </div>\n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Wind Speed</span>\n            <span class=\"detail-value\">{{ weatherData.windSpeed }} {{ windUnit }}</span>\n          </div>\n        </div>\n\n        <!-- Refresh Button -->\n        <button *ngIf=\"enableSearch\" (click)=\"refreshWeather()\" class=\"refresh-button\" title=\"Refresh\">\n          üîÑ\n        </button>\n      </div>\n    </div>\n  `,\n  styleUrls: ['./weather-widget.css'],\n})\nexport class WeatherWidgetComponent implements OnInit {\n  private weatherService = inject(WeatherService);\n\n  /** Enable search functionality */\n  @Input()\n  enableSearch: boolean = false;\n\n  /** Initial city to load */\n  @Input()\n  initialCity: string = 'The Hague';\n\n  /** Use real API data (if false, uses mock data) */\n  @Input()\n  useRealData: boolean = false;\n\n  /** Weather data to display */\n  @Input()\n  weatherData: WeatherData = {\n    location: 'The Hague',\n    temperature: 5,\n    condition: 'Partly Cloudy',\n    humidity: 65,\n    windSpeed: 12,\n    icon: '‚õÖ',\n  };\n\n  /** Temperature unit (C or F) */\n  @Input()\n  unit: 'C' | 'F' = 'F';\n\n  /** Wind speed unit */\n  @Input()\n  windUnit: 'mph' | 'km/h' = 'km/h';\n\n  /** Theme of the widget */\n  @Input()\n  theme: 'light' | 'dark' | 'gradient' = 'light';\n\n  /** Widget size */\n  @Input()\n  size: 'small' | 'medium' | 'large' = 'medium';\n\n  currentDate: string = '';\n  searchCity: string = '';\n  loading: boolean = false;\n  error: string = '';\n  lastSearchedCity: string = '';\n\n  ngOnInit() {\n    this.updateCurrentDate();\n    this.searchCity = this.initialCity;\n    this.lastSearchedCity = this.initialCity;\n\n    // Load weather data if real API is enabled\n    if (this.useRealData && this.enableSearch) {\n      this.loadWeather(this.initialCity);\n    }\n  }\n\n  /**\n   * Search weather by city name\n   */\n  searchWeather() {\n    if (!this.searchCity.trim()) {\n      this.error = 'Please enter a city name';\n      return;\n    }\n    this.loadWeather(this.searchCity.trim());\n  }\n\n  /**\n   * Get weather for current location using geolocation\n   */\n  async getCurrentLocationWeather() {\n    this.loading = true;\n    this.error = '';\n\n    try {\n      const coords = await this.weatherService.getCurrentPosition();\n      const units = this.unit === 'C' ? 'metric' : 'imperial';\n\n      this.weatherService.getWeatherByCoordinates(coords.latitude, coords.longitude, units)\n        .subscribe({\n          next: (data) => this.handleWeatherData(data),\n          error: (err) => this.handleError(err)\n        });\n    } catch (err: any) {\n      this.loading = false;\n      this.error = err.message || 'Unable to get your location';\n    }\n  }\n\n  /**\n   * Refresh current weather data\n   */\n  refreshWeather() {\n    if (this.lastSearchedCity) {\n      this.loadWeather(this.lastSearchedCity);\n    }\n  }\n\n  /**\n   * Retry after error\n   */\n  retry() {\n    if (this.lastSearchedCity) {\n      this.loadWeather(this.lastSearchedCity);\n    } else {\n      this.error = '';\n    }\n  }\n\n  /**\n   * Load weather data from API\n   */\n  private loadWeather(city: string) {\n    this.loading = true;\n    this.error = '';\n    this.lastSearchedCity = city;\n\n    const units = this.unit === 'C' ? 'metric' : 'imperial';\n\n    this.weatherService.getWeatherByCity(city, units).subscribe({\n      next: (data) => this.handleWeatherData(data),\n      error: (err) => this.handleError(err)\n    });\n  }\n\n  /**\n   * Handle successful weather data response\n   */\n  private handleWeatherData(data: WeatherResponse) {\n    this.weatherData = {\n      location: data.location,\n      temperature: data.temperature,\n      condition: data.condition,\n      humidity: data.humidity,\n      windSpeed: data.windSpeed,\n      icon: data.icon\n    };\n    this.loading = false;\n    this.error = '';\n  }\n\n  /**\n   * Handle API errors\n   */\n  private handleError(err: any) {\n    this.loading = false;\n    this.error = err.message || 'Failed to load weather data';\n    console.error('Weather widget error:', err);\n  }\n\n  /**\n   * Update current date display\n   */\n  private updateCurrentDate() {\n    this.currentDate = new Date().toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  }\n\n  get themeClass(): string {\n    return `weather-widget--${this.theme} weather-widget--${this.size}`;\n  }\n}\n",
            "properties": [
                {
                    "name": "condition",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "humidity",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "icon",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "location",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 7
                },
                {
                    "name": "temperature",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                },
                {
                    "name": "windSpeed",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "WeatherResponse",
            "id": "interface-WeatherResponse-bcbe1430a6d0afe15ecb713649060156344daba3f2f565796dd78da0f6fc50cadf28ab9e3a0816c42978729d5de8669453cfcbbc3237da3cc534d0a52fdd582e",
            "file": "src/stories/weather-widget/weather.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\n\nexport interface WeatherResponse {\n  location: string;\n  temperature: number;\n  condition: string;\n  description: string;\n  humidity: number;\n  windSpeed: number;\n  icon: string;\n  feelsLike: number;\n  pressure: number;\n  visibility: number;\n  sunrise: number;\n  sunset: number;\n  forecast?: DailyForecast[];\n}\n\nexport interface DailyForecast {\n  date: string;\n  tempMax: number;\n  tempMin: number;\n  condition: string;\n  icon: string;\n  humidity: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WeatherService {\n  // Base URLs when using proxy vs direct calls\n  private readonly PROXY_BASE_URL = '/api/data/2.5';\n  private readonly DEFAULT_BASE_URL = 'https://api.openweathermap.org/data/2.5';\n\n  private readonly apiKey = environment.weatherApi?.key?.trim() ?? '';\n  private readonly useProxy = environment.useProxy === true;\n  private readonly corsProxy = environment.corsProxy?.trim() ?? '';\n  private readonly configuredBaseUrl = environment.weatherApi?.baseUrl?.trim() ?? this.DEFAULT_BASE_URL;\n\n  constructor(private http: HttpClient) {}\n\n  /**\n   * Get weather data by city name\n   */\n  getWeatherByCity(city: string, units: 'metric' | 'imperial' = 'imperial'): Observable<WeatherResponse> {\n    if (!this.isApiKeyConfigured()) {\n      return throwError(() => new Error('Weather API key is not configured. Please update environment.weatherApi.key.'));\n    }\n\n    const url = this.buildApiUrl('/weather', {\n      q: city,\n      units,\n      appid: this.apiKey\n    });\n\n    return this.http.get<any>(url).pipe(\n      map(data => this.transformWeatherData(data, units)),\n      catchError(this.handleError)\n    );\n  }\n\n  /**\n   * Get weather data by coordinates\n   */\n  getWeatherByCoordinates(lat: number, lon: number, units: 'metric' | 'imperial' = 'imperial'): Observable<WeatherResponse> {\n    if (!this.isApiKeyConfigured()) {\n      return throwError(() => new Error('Weather API key is not configured. Please update environment.weatherApi.key.'));\n    }\n\n    const url = this.buildApiUrl('/weather', {\n      lat,\n      lon,\n      units,\n      appid: this.apiKey\n    });\n\n    return this.http.get<any>(url).pipe(\n      map(data => this.transformWeatherData(data, units)),\n      catchError(this.handleError)\n    );\n  }\n\n  /**\n   * Get 5-day weather forecast\n   */\n  getForecast(city: string, units: 'metric' | 'imperial' = 'imperial'): Observable<DailyForecast[]> {\n    if (!this.isApiKeyConfigured()) {\n      return throwError(() => new Error('Weather API key is not configured. Please update environment.weatherApi.key.'));\n    }\n\n    const url = this.buildApiUrl('/forecast', {\n      q: city,\n      units,\n      appid: this.apiKey\n    });\n\n    return this.http.get<any>(url).pipe(\n      map(data => this.transformForecastData(data)),\n      catchError(this.handleError)\n    );\n  }\n\n  /**\n   * Get current position using browser geolocation\n   */\n  getCurrentPosition(): Promise<GeolocationCoordinates> {\n    return new Promise((resolve, reject) => {\n      if (!navigator.geolocation) {\n        reject(new Error('Geolocation is not supported by your browser'));\n      } else {\n        navigator.geolocation.getCurrentPosition(\n          position => resolve(position.coords),\n          error => reject(error)\n        );\n      }\n    });\n  }\n\n  /**\n   * Transform OpenWeatherMap API response to our WeatherResponse format\n   */\n  private transformWeatherData(data: any, units: string): WeatherResponse {\n    // Validate required data exists\n    if (!data || !data.main || !data.weather || !data.weather[0] || !data.wind || !data.sys) {\n      throw new Error('Invalid API response structure');\n    }\n\n    return {\n      location: `${data.name || 'Unknown'}${data.sys?.country ? ', ' + data.sys.country : ''}`,\n      temperature: Math.round(data.main.temp),\n      condition: data.weather[0].main,\n      description: data.weather[0].description,\n      humidity: data.main.humidity,\n      windSpeed: Math.round(data.wind.speed),\n      icon: this.getWeatherIcon(data.weather[0].id, data.weather[0].icon),\n      feelsLike: Math.round(data.main.feels_like),\n      pressure: data.main.pressure,\n      visibility: data.visibility || 0,\n      sunrise: data.sys.sunrise || 0,\n      sunset: data.sys.sunset || 0\n    };\n  }\n\n  /**\n   * Transform forecast data\n   */\n  private transformForecastData(data: any): DailyForecast[] {\n    if (!data || !Array.isArray(data.list)) {\n      throw new Error('Invalid forecast API response structure');\n    }\n\n    const dailyData: { [key: string]: any[] } = {};\n\n    // Group forecasts by day\n    data.list.forEach((item: any) => {\n      const date = new Date(item.dt * 1000).toISOString().split('T')[0];\n      if (!dailyData[date]) {\n        dailyData[date] = [];\n      }\n      dailyData[date].push(item);\n    });\n\n    // Get daily summary (first 5 days)\n    return Object.entries(dailyData).slice(0, 5).map(([date, items]) => {\n      const temps = items.map(item => item.main.temp);\n      const mainItem = items[Math.floor(items.length / 2)]; // Use midday data\n\n      return {\n        date,\n        tempMax: Math.round(Math.max(...temps)),\n        tempMin: Math.round(Math.min(...temps)),\n        condition: mainItem.weather[0].main,\n        icon: this.getWeatherIcon(mainItem.weather[0].id, mainItem.weather[0].icon),\n        humidity: mainItem.main.humidity\n      };\n    });\n  }\n\n  /**\n   * Map OpenWeatherMap weather codes to emoji icons\n   * Weather condition codes: https://openweathermap.org/weather-conditions\n   */\n  private getWeatherIcon(weatherId: number, iconCode: string): string {\n    // Check if it's night time (icon code ends with 'n')\n    const isNight = iconCode.endsWith('n');\n\n    if (weatherId >= 200 && weatherId < 300) {\n      return '‚õàÔ∏è'; // Thunderstorm\n    } else if (weatherId >= 300 && weatherId < 400) {\n      return 'üå¶Ô∏è'; // Drizzle\n    } else if (weatherId >= 500 && weatherId < 600) {\n      return 'üåßÔ∏è'; // Rain\n    } else if (weatherId >= 600 && weatherId < 700) {\n      return '‚ùÑÔ∏è'; // Snow\n    } else if (weatherId >= 700 && weatherId < 800) {\n      return 'üå´Ô∏è'; // Atmosphere (mist, fog, etc.)\n    } else if (weatherId === 800) {\n      return isNight ? 'üåô' : '‚òÄÔ∏è'; // Clear\n    } else if (weatherId === 801) {\n      return isNight ? '‚òÅÔ∏è' : '‚õÖ'; // Few clouds\n    } else if (weatherId > 801) {\n      return '‚òÅÔ∏è'; // Cloudy\n    }\n\n    return '‚õÖ'; // Default\n  }\n\n  /**\n   * Handle HTTP errors\n   */\n  private handleError(error: any): Observable<never> {\n    let errorMessage = 'An error occurred while fetching weather data';\n\n    if (error.error instanceof ErrorEvent) {\n      // Client-side error\n      errorMessage = `Error: ${error.error.message}`;\n    } else if (error.status) {\n      // Server-side error\n      switch (error.status) {\n        case 401:\n          errorMessage = 'Invalid API key';\n          break;\n        case 404:\n          errorMessage = 'City not found';\n          break;\n        case 429:\n          errorMessage = 'API rate limit exceeded';\n          break;\n        default:\n          errorMessage = `Error: ${error.message}`;\n      }\n    }\n\n    console.error('Weather API Error:', error);\n    return throwError(() => new Error(errorMessage));\n  }\n\n  /**\n   * Build the API URL depending on proxy/cors configuration\n   */\n  private buildApiUrl(endpoint: string, params: Record<string, string | number>): string {\n    const base = this.useProxy ? this.PROXY_BASE_URL : this.configuredBaseUrl;\n    const normalizedBase = base.endsWith('/') ? base.slice(0, -1) : base;\n    const normalizedEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\n\n    const urlParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      urlParams.set(key, String(value));\n    });\n\n    const apiUrl = `${normalizedBase}${normalizedEndpoint}?${urlParams.toString()}`;\n\n    if (this.useProxy || !this.corsProxy) {\n      return apiUrl;\n    }\n\n    // When not using proxy, optionally prepend configured CORS proxy\n    if (this.corsProxy.includes('{url}')) {\n      return this.corsProxy.replace('{url}', encodeURIComponent(apiUrl));\n    }\n\n    const shouldEncode = this.corsProxy.endsWith('=') || this.corsProxy.includes('?url=');\n    return shouldEncode\n      ? `${this.corsProxy}${encodeURIComponent(apiUrl)}`\n      : `${this.corsProxy}${apiUrl}`;\n  }\n\n  private isApiKeyConfigured(): boolean {\n    return !!this.apiKey && this.apiKey !== 'YOUR_OPENWEATHERMAP_API_KEY';\n  }\n}\n",
            "properties": [
                {
                    "name": "condition",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "description",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11
                },
                {
                    "name": "feelsLike",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 15
                },
                {
                    "name": "forecast",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "DailyForecast[]",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 20
                },
                {
                    "name": "humidity",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "icon",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 14
                },
                {
                    "name": "location",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                },
                {
                    "name": "pressure",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 16
                },
                {
                    "name": "sunrise",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 18
                },
                {
                    "name": "sunset",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 19
                },
                {
                    "name": "temperature",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "visibility",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 17
                },
                {
                    "name": "windSpeed",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 13
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        }
    ],
    "injectables": [
        {
            "name": "WeatherService",
            "id": "injectable-WeatherService-bcbe1430a6d0afe15ecb713649060156344daba3f2f565796dd78da0f6fc50cadf28ab9e3a0816c42978729d5de8669453cfcbbc3237da3cc534d0a52fdd582e",
            "file": "src/stories/weather-widget/weather.service.ts",
            "properties": [
                {
                    "name": "apiKey",
                    "defaultValue": "environment.weatherApi?.key?.trim() ?? ''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 40,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "configuredBaseUrl",
                    "defaultValue": "environment.weatherApi?.baseUrl?.trim() ?? this.DEFAULT_BASE_URL",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 43,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "corsProxy",
                    "defaultValue": "environment.corsProxy?.trim() ?? ''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 42,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "DEFAULT_BASE_URL",
                    "defaultValue": "'https://api.openweathermap.org/data/2.5'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 38,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "PROXY_BASE_URL",
                    "defaultValue": "'/api/data/2.5'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "useProxy",
                    "defaultValue": "environment.useProxy === true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 41,
                    "modifierKind": [
                        123,
                        148
                    ]
                }
            ],
            "methods": [
                {
                    "name": "buildApiUrl",
                    "args": [
                        {
                            "name": "endpoint",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "params",
                            "type": "Record<string | string | number>",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 246,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nBuild the API URL depending on proxy/cors configuration\n",
                    "description": "<p>Build the API URL depending on proxy/cors configuration</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "endpoint",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "params",
                            "type": "Record<string | string | number>",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getCurrentPosition",
                    "args": [],
                    "optional": false,
                    "returnType": "Promise<GeolocationCoordinates>",
                    "typeParameters": [],
                    "line": 111,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet current position using browser geolocation\n",
                    "description": "<p>Get current position using browser geolocation</p>\n"
                },
                {
                    "name": "getForecast",
                    "args": [
                        {
                            "name": "city",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "units",
                            "type": "\"metric\" | \"imperial\"",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'imperial'"
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<DailyForecast[]>",
                    "typeParameters": [],
                    "line": 91,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet 5-day weather forecast\n",
                    "description": "<p>Get 5-day weather forecast</p>\n",
                    "jsdoctags": [
                        {
                            "name": "city",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "units",
                            "type": "\"metric\" | \"imperial\"",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'imperial'",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getWeatherByCity",
                    "args": [
                        {
                            "name": "city",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "units",
                            "type": "\"metric\" | \"imperial\"",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'imperial'"
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<WeatherResponse>",
                    "typeParameters": [],
                    "line": 50,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet weather data by city name\n",
                    "description": "<p>Get weather data by city name</p>\n",
                    "jsdoctags": [
                        {
                            "name": "city",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "units",
                            "type": "\"metric\" | \"imperial\"",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'imperial'",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getWeatherByCoordinates",
                    "args": [
                        {
                            "name": "lat",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "lon",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "units",
                            "type": "\"metric\" | \"imperial\"",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'imperial'"
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<WeatherResponse>",
                    "typeParameters": [],
                    "line": 70,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet weather data by coordinates\n",
                    "description": "<p>Get weather data by coordinates</p>\n",
                    "jsdoctags": [
                        {
                            "name": "lat",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "lon",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "units",
                            "type": "\"metric\" | \"imperial\"",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'imperial'",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getWeatherIcon",
                    "args": [
                        {
                            "name": "weatherId",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "iconCode",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 188,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nMap OpenWeatherMap weather codes to emoji icons\nWeather condition codes: https://openweathermap.org/weather-conditions\n",
                    "description": "<p>Map OpenWeatherMap weather codes to emoji icons\nWeather condition codes: <a href=\"https://openweathermap.org/weather-conditions\">https://openweathermap.org/weather-conditions</a></p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "weatherId",
                            "type": "number",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "iconCode",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "handleError",
                    "args": [
                        {
                            "name": "error",
                            "type": "any",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<never>",
                    "typeParameters": [],
                    "line": 216,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nHandle HTTP errors\n",
                    "description": "<p>Handle HTTP errors</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "error",
                            "type": "any",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "isApiKeyConfigured",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 273,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "transformForecastData",
                    "args": [
                        {
                            "name": "data",
                            "type": "any",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "DailyForecast[]",
                    "typeParameters": [],
                    "line": 152,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nTransform forecast data\n",
                    "description": "<p>Transform forecast data</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "data",
                            "type": "any",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "transformWeatherData",
                    "args": [
                        {
                            "name": "data",
                            "type": "any",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "units",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "WeatherResponse",
                    "typeParameters": [],
                    "line": 127,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nTransform OpenWeatherMap API response to our WeatherResponse format\n",
                    "description": "<p>Transform OpenWeatherMap API response to our WeatherResponse format</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "data",
                            "type": "any",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "units",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\n\nexport interface WeatherResponse {\n  location: string;\n  temperature: number;\n  condition: string;\n  description: string;\n  humidity: number;\n  windSpeed: number;\n  icon: string;\n  feelsLike: number;\n  pressure: number;\n  visibility: number;\n  sunrise: number;\n  sunset: number;\n  forecast?: DailyForecast[];\n}\n\nexport interface DailyForecast {\n  date: string;\n  tempMax: number;\n  tempMin: number;\n  condition: string;\n  icon: string;\n  humidity: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WeatherService {\n  // Base URLs when using proxy vs direct calls\n  private readonly PROXY_BASE_URL = '/api/data/2.5';\n  private readonly DEFAULT_BASE_URL = 'https://api.openweathermap.org/data/2.5';\n\n  private readonly apiKey = environment.weatherApi?.key?.trim() ?? '';\n  private readonly useProxy = environment.useProxy === true;\n  private readonly corsProxy = environment.corsProxy?.trim() ?? '';\n  private readonly configuredBaseUrl = environment.weatherApi?.baseUrl?.trim() ?? this.DEFAULT_BASE_URL;\n\n  constructor(private http: HttpClient) {}\n\n  /**\n   * Get weather data by city name\n   */\n  getWeatherByCity(city: string, units: 'metric' | 'imperial' = 'imperial'): Observable<WeatherResponse> {\n    if (!this.isApiKeyConfigured()) {\n      return throwError(() => new Error('Weather API key is not configured. Please update environment.weatherApi.key.'));\n    }\n\n    const url = this.buildApiUrl('/weather', {\n      q: city,\n      units,\n      appid: this.apiKey\n    });\n\n    return this.http.get<any>(url).pipe(\n      map(data => this.transformWeatherData(data, units)),\n      catchError(this.handleError)\n    );\n  }\n\n  /**\n   * Get weather data by coordinates\n   */\n  getWeatherByCoordinates(lat: number, lon: number, units: 'metric' | 'imperial' = 'imperial'): Observable<WeatherResponse> {\n    if (!this.isApiKeyConfigured()) {\n      return throwError(() => new Error('Weather API key is not configured. Please update environment.weatherApi.key.'));\n    }\n\n    const url = this.buildApiUrl('/weather', {\n      lat,\n      lon,\n      units,\n      appid: this.apiKey\n    });\n\n    return this.http.get<any>(url).pipe(\n      map(data => this.transformWeatherData(data, units)),\n      catchError(this.handleError)\n    );\n  }\n\n  /**\n   * Get 5-day weather forecast\n   */\n  getForecast(city: string, units: 'metric' | 'imperial' = 'imperial'): Observable<DailyForecast[]> {\n    if (!this.isApiKeyConfigured()) {\n      return throwError(() => new Error('Weather API key is not configured. Please update environment.weatherApi.key.'));\n    }\n\n    const url = this.buildApiUrl('/forecast', {\n      q: city,\n      units,\n      appid: this.apiKey\n    });\n\n    return this.http.get<any>(url).pipe(\n      map(data => this.transformForecastData(data)),\n      catchError(this.handleError)\n    );\n  }\n\n  /**\n   * Get current position using browser geolocation\n   */\n  getCurrentPosition(): Promise<GeolocationCoordinates> {\n    return new Promise((resolve, reject) => {\n      if (!navigator.geolocation) {\n        reject(new Error('Geolocation is not supported by your browser'));\n      } else {\n        navigator.geolocation.getCurrentPosition(\n          position => resolve(position.coords),\n          error => reject(error)\n        );\n      }\n    });\n  }\n\n  /**\n   * Transform OpenWeatherMap API response to our WeatherResponse format\n   */\n  private transformWeatherData(data: any, units: string): WeatherResponse {\n    // Validate required data exists\n    if (!data || !data.main || !data.weather || !data.weather[0] || !data.wind || !data.sys) {\n      throw new Error('Invalid API response structure');\n    }\n\n    return {\n      location: `${data.name || 'Unknown'}${data.sys?.country ? ', ' + data.sys.country : ''}`,\n      temperature: Math.round(data.main.temp),\n      condition: data.weather[0].main,\n      description: data.weather[0].description,\n      humidity: data.main.humidity,\n      windSpeed: Math.round(data.wind.speed),\n      icon: this.getWeatherIcon(data.weather[0].id, data.weather[0].icon),\n      feelsLike: Math.round(data.main.feels_like),\n      pressure: data.main.pressure,\n      visibility: data.visibility || 0,\n      sunrise: data.sys.sunrise || 0,\n      sunset: data.sys.sunset || 0\n    };\n  }\n\n  /**\n   * Transform forecast data\n   */\n  private transformForecastData(data: any): DailyForecast[] {\n    if (!data || !Array.isArray(data.list)) {\n      throw new Error('Invalid forecast API response structure');\n    }\n\n    const dailyData: { [key: string]: any[] } = {};\n\n    // Group forecasts by day\n    data.list.forEach((item: any) => {\n      const date = new Date(item.dt * 1000).toISOString().split('T')[0];\n      if (!dailyData[date]) {\n        dailyData[date] = [];\n      }\n      dailyData[date].push(item);\n    });\n\n    // Get daily summary (first 5 days)\n    return Object.entries(dailyData).slice(0, 5).map(([date, items]) => {\n      const temps = items.map(item => item.main.temp);\n      const mainItem = items[Math.floor(items.length / 2)]; // Use midday data\n\n      return {\n        date,\n        tempMax: Math.round(Math.max(...temps)),\n        tempMin: Math.round(Math.min(...temps)),\n        condition: mainItem.weather[0].main,\n        icon: this.getWeatherIcon(mainItem.weather[0].id, mainItem.weather[0].icon),\n        humidity: mainItem.main.humidity\n      };\n    });\n  }\n\n  /**\n   * Map OpenWeatherMap weather codes to emoji icons\n   * Weather condition codes: https://openweathermap.org/weather-conditions\n   */\n  private getWeatherIcon(weatherId: number, iconCode: string): string {\n    // Check if it's night time (icon code ends with 'n')\n    const isNight = iconCode.endsWith('n');\n\n    if (weatherId >= 200 && weatherId < 300) {\n      return '‚õàÔ∏è'; // Thunderstorm\n    } else if (weatherId >= 300 && weatherId < 400) {\n      return 'üå¶Ô∏è'; // Drizzle\n    } else if (weatherId >= 500 && weatherId < 600) {\n      return 'üåßÔ∏è'; // Rain\n    } else if (weatherId >= 600 && weatherId < 700) {\n      return '‚ùÑÔ∏è'; // Snow\n    } else if (weatherId >= 700 && weatherId < 800) {\n      return 'üå´Ô∏è'; // Atmosphere (mist, fog, etc.)\n    } else if (weatherId === 800) {\n      return isNight ? 'üåô' : '‚òÄÔ∏è'; // Clear\n    } else if (weatherId === 801) {\n      return isNight ? '‚òÅÔ∏è' : '‚õÖ'; // Few clouds\n    } else if (weatherId > 801) {\n      return '‚òÅÔ∏è'; // Cloudy\n    }\n\n    return '‚õÖ'; // Default\n  }\n\n  /**\n   * Handle HTTP errors\n   */\n  private handleError(error: any): Observable<never> {\n    let errorMessage = 'An error occurred while fetching weather data';\n\n    if (error.error instanceof ErrorEvent) {\n      // Client-side error\n      errorMessage = `Error: ${error.error.message}`;\n    } else if (error.status) {\n      // Server-side error\n      switch (error.status) {\n        case 401:\n          errorMessage = 'Invalid API key';\n          break;\n        case 404:\n          errorMessage = 'City not found';\n          break;\n        case 429:\n          errorMessage = 'API rate limit exceeded';\n          break;\n        default:\n          errorMessage = `Error: ${error.message}`;\n      }\n    }\n\n    console.error('Weather API Error:', error);\n    return throwError(() => new Error(errorMessage));\n  }\n\n  /**\n   * Build the API URL depending on proxy/cors configuration\n   */\n  private buildApiUrl(endpoint: string, params: Record<string, string | number>): string {\n    const base = this.useProxy ? this.PROXY_BASE_URL : this.configuredBaseUrl;\n    const normalizedBase = base.endsWith('/') ? base.slice(0, -1) : base;\n    const normalizedEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\n\n    const urlParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      urlParams.set(key, String(value));\n    });\n\n    const apiUrl = `${normalizedBase}${normalizedEndpoint}?${urlParams.toString()}`;\n\n    if (this.useProxy || !this.corsProxy) {\n      return apiUrl;\n    }\n\n    // When not using proxy, optionally prepend configured CORS proxy\n    if (this.corsProxy.includes('{url}')) {\n      return this.corsProxy.replace('{url}', encodeURIComponent(apiUrl));\n    }\n\n    const shouldEncode = this.corsProxy.endsWith('=') || this.corsProxy.includes('?url=');\n    return shouldEncode\n      ? `${this.corsProxy}${encodeURIComponent(apiUrl)}`\n      : `${this.corsProxy}${apiUrl}`;\n  }\n\n  private isApiKeyConfigured(): boolean {\n    return !!this.apiKey && this.apiKey !== 'YOUR_OPENWEATHERMAP_API_KEY';\n  }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "http",
                        "type": "HttpClient",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 43,
                "jsdoctags": [
                    {
                        "name": "http",
                        "type": "HttpClient",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        }
    ],
    "guards": [],
    "interceptors": [],
    "classes": [],
    "directives": [],
    "components": [
        {
            "name": "App",
            "id": "component-App-4319a2f3c7989e9b9eb14aea55fc657ff2735c831c4fe6e0f6a5e65b4572e7b7dac36bf90997138ed726d43e9ff15362a4e5bb3f597d5628f2f8cda2248725af",
            "file": "src/app/app.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-root",
            "styleUrls": [],
            "styles": [],
            "templateUrl": [
                "./app.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "title",
                    "defaultValue": "signal('weather')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 13,
                    "modifierKind": [
                        124,
                        148
                    ]
                },
                {
                    "name": "weatherData",
                    "defaultValue": "{\n    location: 'The Hague',\n    temperature: 13,\n    condition: 'Partly Cloudy',\n    humidity: 65,\n    windSpeed: 12,\n    icon: '‚õÖ',\n  }",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "WeatherData",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 15
                }
            ],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "RouterOutlet"
                },
                {
                    "name": "WeatherWidgetComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, signal } from '@angular/core';\nimport { RouterOutlet } from '@angular/router';\nimport { provideHttpClient } from '@angular/common/http';\nimport { WeatherWidgetComponent, WeatherData } from '../stories/weather-widget/weather-widget.component';\n\n@Component({\n  selector: 'app-root',\n  imports: [RouterOutlet, WeatherWidgetComponent],\n  templateUrl: './app.html',\n  styleUrl: './app.css'\n})\nexport class App {\n  protected readonly title = signal('weather');\n\n  weatherData: WeatherData = {\n    location: 'The Hague',\n    temperature: 13,\n    condition: 'Partly Cloudy',\n    humidity: 65,\n    windSpeed: 12,\n    icon: '‚õÖ',\n  };\n}\n",
            "styleUrl": "./app.css",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "",
            "extends": [],
            "templateData": "<div class=\"weather-app-container\">\n  <h1>Weather App</h1>\n  <p class=\"subtitle\">Real-time weather forecast for your location</p>\n  <weather-widget\n    [enableSearch]=\"false\"\n    [useRealData]=\"false\"\n    [initialCity]=\"'The Hague'\"\n    [weatherData]=\"weatherData\"\n    [unit]=\"'C'\"\n    [theme]=\"'dark'\"\n    [size]=\"'small'\">\n  </weather-widget>\n</div>\n\n<router-outlet />\n"
        },
        {
            "name": "ButtonComponent",
            "id": "component-ButtonComponent-d7bf0323e6da130e2609e2af0117b4a8d7cd874132206af50bf43dfc37044485fe50f2867ea76525730dd195b9b95a43802a12dadc6ad5cd7bf2faa07f19f0da",
            "file": "src/stories/button/button.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-button",
            "styleUrls": [
                "./button.css"
            ],
            "styles": [],
            "template": " <button  type=\"button\"\n  (click)=\"onClick.emit($event)\"\n  [ngClass]=\"classes\"\n  [ngStyle]=\"{ 'background-color': backgroundColor }\"\n>\n  {{ label }}\n</button>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "backgroundColor",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nWhat background color to use",
                    "description": "<p>What background color to use</p>\n",
                    "line": 25,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "label",
                    "defaultValue": "'Button'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "pos": 760,
                            "end": 773,
                            "kind": 328,
                            "id": 0,
                            "flags": 16842752,
                            "modifierFlagsCache": 0,
                            "transformFlags": 0,
                            "tagName": {
                                "pos": 761,
                                "end": 769,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "required"
                            },
                            "comment": ""
                        }
                    ],
                    "rawdescription": "\n\nButton contents\n\n",
                    "description": "<p>Button contents</p>\n",
                    "line": 37,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "primary",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nIs this the principal call to action on the page?",
                    "description": "<p>Is this the principal call to action on the page?</p>\n",
                    "line": 21,
                    "type": "boolean",
                    "decorators": []
                },
                {
                    "name": "size",
                    "defaultValue": "'medium'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nHow large should the button be?",
                    "description": "<p>How large should the button be?</p>\n",
                    "line": 29,
                    "type": "\"small\" | \"medium\" | \"large\"",
                    "decorators": []
                }
            ],
            "outputsClass": [
                {
                    "name": "onClick",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nOptional click handler",
                    "description": "<p>Optional click handler</p>\n",
                    "line": 41,
                    "type": "EventEmitter"
                }
            ],
            "propertiesClass": [],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { CommonModule } from '@angular/common';\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'storybook-button',\n  standalone: true,\n  imports: [CommonModule],\n  template: ` <button\n  type=\"button\"\n  (click)=\"onClick.emit($event)\"\n  [ngClass]=\"classes\"\n  [ngStyle]=\"{ 'background-color': backgroundColor }\"\n>\n  {{ label }}\n</button>`,\n  styleUrls: ['./button.css'],\n})\nexport class ButtonComponent {\n  /** Is this the principal call to action on the page? */\n  @Input()\n  primary = false;\n\n  /** What background color to use */\n  @Input()\n  backgroundColor?: string;\n\n  /** How large should the button be? */\n  @Input()\n  size: 'small' | 'medium' | 'large' = 'medium';\n\n  /**\n   * Button contents\n   *\n   * @required\n   */\n  @Input()\n  label = 'Button';\n\n  /** Optional click handler */\n  @Output()\n  onClick = new EventEmitter<Event>();\n\n  public get classes(): string[] {\n    const mode = this.primary ? 'storybook-button--primary' : 'storybook-button--secondary';\n\n    return ['storybook-button', `storybook-button--${this.size}`, mode];\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-button {\n  display: inline-block;\n  cursor: pointer;\n  border: 0;\n  border-radius: 3em;\n  font-weight: 700;\n  line-height: 1;\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n.storybook-button--primary {\n  background-color: #555ab9;\n  color: white;\n}\n.storybook-button--secondary {\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset;\n  background-color: transparent;\n  color: #333;\n}\n.storybook-button--small {\n  padding: 10px 16px;\n  font-size: 12px;\n}\n.storybook-button--medium {\n  padding: 11px 20px;\n  font-size: 14px;\n}\n.storybook-button--large {\n  padding: 12px 24px;\n  font-size: 16px;\n}\n",
                    "styleUrl": "./button.css"
                }
            ],
            "stylesData": "",
            "extends": [],
            "accessors": {
                "classes": {
                    "name": "classes",
                    "getSignature": {
                        "name": "classes",
                        "type": "[]",
                        "returnType": "string[]",
                        "line": 43
                    }
                }
            }
        },
        {
            "name": "HeaderComponent",
            "id": "component-HeaderComponent-349127ac0e3c3a5273c08d026c6c40b0d0a25bbc149e7795384fafc9efaf70a9d3f6f3fb5cead5e900019576f546fd4eb750a808209aab33110de90f4e23388a",
            "file": "src/stories/header/header.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-header",
            "styleUrls": [
                "./header.css"
            ],
            "styles": [],
            "template": "<header>  <div class=\"storybook-header\">\n    <div>\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M10 0h12a10 10 0 0110 10v12a10 10 0 01-10 10H10A10 10 0 010 22V10A10 10 0 0110 0z\"\n            fill=\"#FFF\"\n          />\n          <path\n            d=\"M5.3 10.6l10.4 6v11.1l-10.4-6v-11zm11.4-6.2l9.7 5.5-9.7 5.6V4.4z\"\n            fill=\"#555AB9\"\n          />\n          <path d=\"M27.2 10.6v11.2l-10.5 6V16.5l10.5-6zM15.7 4.4v11L6 10l9.7-5.5z\" fill=\"#91BAF8\" />\n        </g>\n      </svg>\n      <h1>Acme</h1>\n    </div>\n    <div>\n      <div *ngIf=\"user\">\n        <span class=\"welcome\">\n          Welcome, <b>{{ user.name }}</b\n          >!\n        </span>\n        <storybook-button\n          *ngIf=\"user\"\n          size=\"small\"\n          (onClick)=\"onLogout.emit($event)\"\n          label=\"Log out\"\n        ></storybook-button>\n      </div>\n      <div *ngIf=\"!user\">\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          class=\"margin-left\"\n          (onClick)=\"onLogin.emit($event)\"\n          label=\"Log in\"\n        ></storybook-button>\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          [primary]=\"true\"\n          class=\"margin-left\"\n          (onClick)=\"onCreateAccount.emit($event)\"\n          label=\"Sign up\"\n        ></storybook-button>\n      </div>\n    </div>\n  </div>\n</header>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "user",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 66,
                    "type": "User | null",
                    "decorators": []
                }
            ],
            "outputsClass": [
                {
                    "name": "onCreateAccount",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 75,
                    "type": "EventEmitter"
                },
                {
                    "name": "onLogin",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 69,
                    "type": "EventEmitter"
                },
                {
                    "name": "onLogout",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 72,
                    "type": "EventEmitter"
                }
            ],
            "propertiesClass": [],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "ButtonComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ButtonComponent } from '../button/button.component';\nimport type { User } from './user';\n\n@Component({\n  selector: 'storybook-header',\n  standalone: true,\n  imports: [CommonModule, ButtonComponent],\n  template: `<header>\n  <div class=\"storybook-header\">\n    <div>\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M10 0h12a10 10 0 0110 10v12a10 10 0 01-10 10H10A10 10 0 010 22V10A10 10 0 0110 0z\"\n            fill=\"#FFF\"\n          />\n          <path\n            d=\"M5.3 10.6l10.4 6v11.1l-10.4-6v-11zm11.4-6.2l9.7 5.5-9.7 5.6V4.4z\"\n            fill=\"#555AB9\"\n          />\n          <path d=\"M27.2 10.6v11.2l-10.5 6V16.5l10.5-6zM15.7 4.4v11L6 10l9.7-5.5z\" fill=\"#91BAF8\" />\n        </g>\n      </svg>\n      <h1>Acme</h1>\n    </div>\n    <div>\n      <div *ngIf=\"user\">\n        <span class=\"welcome\">\n          Welcome, <b>{{ user.name }}</b\n          >!\n        </span>\n        <storybook-button\n          *ngIf=\"user\"\n          size=\"small\"\n          (onClick)=\"onLogout.emit($event)\"\n          label=\"Log out\"\n        ></storybook-button>\n      </div>\n      <div *ngIf=\"!user\">\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          class=\"margin-left\"\n          (onClick)=\"onLogin.emit($event)\"\n          label=\"Log in\"\n        ></storybook-button>\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          [primary]=\"true\"\n          class=\"margin-left\"\n          (onClick)=\"onCreateAccount.emit($event)\"\n          label=\"Sign up\"\n        ></storybook-button>\n      </div>\n    </div>\n  </div>\n</header>`,\n  styleUrls: ['./header.css'],\n})\nexport class HeaderComponent {\n  @Input()\n  user: User | null = null;\n\n  @Output()\n  onLogin = new EventEmitter<Event>();\n\n  @Output()\n  onLogout = new EventEmitter<Event>();\n\n  @Output()\n  onCreateAccount = new EventEmitter<Event>();\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 15px 20px;\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n.storybook-header svg {\n  display: inline-block;\n  vertical-align: top;\n}\n\n.storybook-header h1 {\n  display: inline-block;\n  vertical-align: top;\n  margin: 6px 0 6px 10px;\n  font-weight: 700;\n  font-size: 20px;\n  line-height: 1;\n}\n\n.storybook-header button + button {\n  margin-left: 10px;\n}\n\n.storybook-header .welcome {\n  margin-right: 10px;\n  color: #333;\n  font-size: 14px;\n}\n",
                    "styleUrl": "./header.css"
                }
            ],
            "stylesData": "",
            "extends": []
        },
        {
            "name": "PageComponent",
            "id": "component-PageComponent-1f427ef822d98b538dd0d2ac2664ca7e68634ccbabada2144693f1d5f4c08f0eb9e04a67a391ec696fc355aaa7b39a3aba28b8e992992fc55b4e69ae5a595f1e",
            "file": "src/stories/page/page.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-page",
            "styleUrls": [
                "./page.css"
            ],
            "styles": [],
            "template": "<article>  <storybook-header\n    [user]=\"user\"\n    (onLogout)=\"doLogout()\"\n    (onLogin)=\"doLogin()\"\n    (onCreateAccount)=\"doCreateAccount()\"\n  ></storybook-header>\n  <section class=\"storybook-page\">\n    <h2>Pages in Storybook</h2>\n    <p>\n      We recommend building UIs with a\n      <a href=\"https://componentdriven.org\" target=\"_blank\" rel=\"noopener noreferrer\">\n        <strong>component-driven</strong>\n      </a>\n      process starting with atomic components and ending with pages.\n    </p>\n    <p>\n      Render pages with mock data. This makes it easy to build and review page states without\n      needing to navigate to them in your app. Here are some handy patterns for managing page data\n      in Storybook:\n    </p>\n    <ul>\n      <li>\n        Use a higher-level connected component. Storybook helps you compose such data from the\n        \"args\" of child component stories\n      </li>\n      <li>\n        Assemble data in the page component from your services. You can mock these services out\n        using Storybook.\n      </li>\n    </ul>\n    <p>\n      Get a guided tutorial on component-driven development at\n      <a href=\"https://storybook.js.org/tutorials/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        Storybook tutorials\n      </a>\n      . Read more in the\n      <a href=\"https://storybook.js.org/docs\" target=\"_blank\" rel=\"noopener noreferrer\"> docs </a>\n      .\n    </p>\n    <div class=\"tip-wrapper\">\n      <span class=\"tip\">Tip</span> Adjust the width of the canvas with the\n      <svg width=\"10\" height=\"10\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M1.5 5.2h4.8c.3 0 .5.2.5.4v5.1c-.1.2-.3.3-.4.3H1.4a.5.5 0 01-.5-.4V5.7c0-.3.2-.5.5-.5zm0-2.1h6.9c.3 0 .5.2.5.4v7a.5.5 0 01-1 0V4H1.5a.5.5 0 010-1zm0-2.1h9c.3 0 .5.2.5.4v9.1a.5.5 0 01-1 0V2H1.5a.5.5 0 010-1zm4.3 5.2H2V10h3.8V6.2z\"\n            id=\"a\"\n            fill=\"#999\"\n          />\n        </g>\n      </svg>\n      Viewports addon in the toolbar\n    </div>\n  </section>\n</article>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "user",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "User | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 69
                }
            ],
            "methodsClass": [
                {
                    "name": "doCreateAccount",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 79,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "doLogin",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 75,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "doLogout",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 71,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "HeaderComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { HeaderComponent } from '../header/header.component';\nimport type { User } from '../header/user';\n\n@Component({\n  selector: 'storybook-page',\n  standalone: true,\n  imports: [CommonModule, HeaderComponent],\n  template: `<article>\n  <storybook-header\n    [user]=\"user\"\n    (onLogout)=\"doLogout()\"\n    (onLogin)=\"doLogin()\"\n    (onCreateAccount)=\"doCreateAccount()\"\n  ></storybook-header>\n  <section class=\"storybook-page\">\n    <h2>Pages in Storybook</h2>\n    <p>\n      We recommend building UIs with a\n      <a href=\"https://componentdriven.org\" target=\"_blank\" rel=\"noopener noreferrer\">\n        <strong>component-driven</strong>\n      </a>\n      process starting with atomic components and ending with pages.\n    </p>\n    <p>\n      Render pages with mock data. This makes it easy to build and review page states without\n      needing to navigate to them in your app. Here are some handy patterns for managing page data\n      in Storybook:\n    </p>\n    <ul>\n      <li>\n        Use a higher-level connected component. Storybook helps you compose such data from the\n        \"args\" of child component stories\n      </li>\n      <li>\n        Assemble data in the page component from your services. You can mock these services out\n        using Storybook.\n      </li>\n    </ul>\n    <p>\n      Get a guided tutorial on component-driven development at\n      <a href=\"https://storybook.js.org/tutorials/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        Storybook tutorials\n      </a>\n      . Read more in the\n      <a href=\"https://storybook.js.org/docs\" target=\"_blank\" rel=\"noopener noreferrer\"> docs </a>\n      .\n    </p>\n    <div class=\"tip-wrapper\">\n      <span class=\"tip\">Tip</span> Adjust the width of the canvas with the\n      <svg width=\"10\" height=\"10\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M1.5 5.2h4.8c.3 0 .5.2.5.4v5.1c-.1.2-.3.3-.4.3H1.4a.5.5 0 01-.5-.4V5.7c0-.3.2-.5.5-.5zm0-2.1h6.9c.3 0 .5.2.5.4v7a.5.5 0 01-1 0V4H1.5a.5.5 0 010-1zm0-2.1h9c.3 0 .5.2.5.4v9.1a.5.5 0 01-1 0V2H1.5a.5.5 0 010-1zm4.3 5.2H2V10h3.8V6.2z\"\n            id=\"a\"\n            fill=\"#999\"\n          />\n        </g>\n      </svg>\n      Viewports addon in the toolbar\n    </div>\n  </section>\n</article>`,\n  styleUrls: ['./page.css'],\n})\nexport class PageComponent {\n  user: User | null = null;\n\n  doLogout() {\n    this.user = null;\n  }\n\n  doLogin() {\n    this.user = { name: 'Jane Doe' };\n  }\n\n  doCreateAccount() {\n    this.user = { name: 'Jane Doe' };\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-page {\n  margin: 0 auto;\n  padding: 48px 20px;\n  max-width: 600px;\n  color: #333;\n  font-size: 14px;\n  line-height: 24px;\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n.storybook-page h2 {\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 0 4px;\n  font-weight: 700;\n  font-size: 32px;\n  line-height: 1;\n}\n\n.storybook-page p {\n  margin: 1em 0;\n}\n\n.storybook-page a {\n  color: inherit;\n}\n\n.storybook-page ul {\n  margin: 1em 0;\n  padding-left: 30px;\n}\n\n.storybook-page li {\n  margin-bottom: 8px;\n}\n\n.storybook-page .tip {\n  display: inline-block;\n  vertical-align: top;\n  margin-right: 10px;\n  border-radius: 1em;\n  background: #e7fdd8;\n  padding: 4px 12px;\n  color: #357a14;\n  font-weight: 700;\n  font-size: 11px;\n  line-height: 12px;\n}\n\n.storybook-page .tip-wrapper {\n  margin-top: 40px;\n  margin-bottom: 40px;\n  font-size: 13px;\n  line-height: 20px;\n}\n\n.storybook-page .tip-wrapper svg {\n  display: inline-block;\n  vertical-align: top;\n  margin-top: 3px;\n  margin-right: 4px;\n  width: 12px;\n  height: 12px;\n}\n\n.storybook-page .tip-wrapper svg path {\n  fill: #1ea7fd;\n}\n",
                    "styleUrl": "./page.css"
                }
            ],
            "stylesData": "",
            "extends": []
        },
        {
            "name": "WeatherWidgetComponent",
            "id": "component-WeatherWidgetComponent-fc0a4dcf6eac2139c87a1d55577cfac18a40b39b3ff4346f2e2a0642057135eb13a7809cb7a6a9401038588e9d7b46a1de9f08122fd7a0f1db504f539add65aa",
            "file": "src/stories/weather-widget/weather-widget.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [
                {
                    "name": "WeatherService",
                    "type": "injectable"
                }
            ],
            "selector": "weather-widget",
            "styleUrls": [
                "./weather-widget.css"
            ],
            "styles": [],
            "template": "<div class=\"weather-widget\" [ngClass]=\"themeClass\">\n  <!-- Search Bar -->\n  <div class=\"weather-search\" *ngIf=\"enableSearch\">\n    <input\n      type=\"text\"\n      [(ngModel)]=\"searchCity\"\n      (keyup.enter)=\"searchWeather()\"\n      placeholder=\"Enter city name...\"\n      class=\"search-input\"\n    />\n    <button (click)=\"searchWeather()\" class=\"search-button\">üîç</button>\n    <button (click)=\"getCurrentLocationWeather()\" class=\"location-button\" title=\"Use my location\">üìç</button>\n  </div>\n\n  <!-- Loading State -->\n  <div *ngIf=\"loading\" class=\"weather-loading\">\n    <div class=\"spinner\"></div>\n    <p>Loading weather data...</p>\n  </div>\n\n  <!-- Error State -->\n  <div *ngIf=\"error && !loading\" class=\"weather-error\">\n    <span class=\"error-icon\">‚ö†Ô∏è</span>\n    <p>{{ error }}</p>\n    <button (click)=\"retry()\" class=\"retry-button\">Try Again</button>\n  </div>\n\n  <!-- Weather Content -->\n  <div *ngIf=\"!loading && !error\" class=\"weather-content\">\n    <div class=\"weather-header\">\n      <h2 class=\"location\">{{ weatherData.location }}</h2>\n      <span class=\"date\">{{ currentDate }}</span>\n    </div>\n\n    <div class=\"weather-main\">\n      <div class=\"weather-icon\">{{ weatherData.icon }}</div>\n      <div class=\"temperature\">{{ weatherData.temperature }}¬∞{{ unit }}</div>\n    </div>\n\n    <div class=\"weather-condition\">{{ weatherData.condition }}</div>\n\n    <div class=\"weather-details\">\n      <div class=\"detail-item\">\n        <span class=\"detail-label\">Humidity</span>\n        <span class=\"detail-value\">{{ weatherData.humidity }}%</span>\n      </div>\n      <div class=\"detail-item\">\n        <span class=\"detail-label\">Wind Speed</span>\n        <span class=\"detail-value\">{{ weatherData.windSpeed }} {{ windUnit }}</span>\n      </div>\n    </div>\n\n    <!-- Refresh Button -->\n    <button *ngIf=\"enableSearch\" (click)=\"refreshWeather()\" class=\"refresh-button\" title=\"Refresh\">\n      üîÑ\n    </button>\n  </div>\n</div>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "enableSearch",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nEnable search functionality",
                    "description": "<p>Enable search functionality</p>\n",
                    "line": 87,
                    "type": "boolean",
                    "decorators": []
                },
                {
                    "name": "initialCity",
                    "defaultValue": "'The Hague'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nInitial city to load",
                    "description": "<p>Initial city to load</p>\n",
                    "line": 91,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "size",
                    "defaultValue": "'medium'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nWidget size",
                    "description": "<p>Widget size</p>\n",
                    "line": 122,
                    "type": "\"small\" | \"medium\" | \"large\"",
                    "decorators": []
                },
                {
                    "name": "theme",
                    "defaultValue": "'light'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nTheme of the widget",
                    "description": "<p>Theme of the widget</p>\n",
                    "line": 118,
                    "type": "\"light\" | \"dark\" | \"gradient\"",
                    "decorators": []
                },
                {
                    "name": "unit",
                    "defaultValue": "'F'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nTemperature unit (C or F)",
                    "description": "<p>Temperature unit (C or F)</p>\n",
                    "line": 110,
                    "type": "\"C\" | \"F\"",
                    "decorators": []
                },
                {
                    "name": "useRealData",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nUse real API data (if false, uses mock data)",
                    "description": "<p>Use real API data (if false, uses mock data)</p>\n",
                    "line": 95,
                    "type": "boolean",
                    "decorators": []
                },
                {
                    "name": "weatherData",
                    "defaultValue": "{\n    location: 'The Hague',\n    temperature: 5,\n    condition: 'Partly Cloudy',\n    humidity: 65,\n    windSpeed: 12,\n    icon: '‚õÖ',\n  }",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nWeather data to display",
                    "description": "<p>Weather data to display</p>\n",
                    "line": 99,
                    "type": "WeatherData",
                    "decorators": []
                },
                {
                    "name": "windUnit",
                    "defaultValue": "'km/h'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nWind speed unit",
                    "description": "<p>Wind speed unit</p>\n",
                    "line": 114,
                    "type": "\"mph\" | \"km/h\"",
                    "decorators": []
                }
            ],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "currentDate",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 124
                },
                {
                    "name": "error",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 127
                },
                {
                    "name": "lastSearchedCity",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 128
                },
                {
                    "name": "loading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 126
                },
                {
                    "name": "searchCity",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 125
                },
                {
                    "name": "weatherService",
                    "defaultValue": "inject(WeatherService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 83,
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "methodsClass": [
                {
                    "name": "getCurrentLocationWeather",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 155,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet weather for current location using geolocation\n",
                    "description": "<p>Get weather for current location using geolocation</p>\n",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "handleError",
                    "args": [
                        {
                            "name": "err",
                            "type": "any",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 229,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nHandle API errors\n",
                    "description": "<p>Handle API errors</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "err",
                            "type": "any",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "handleWeatherData",
                    "args": [
                        {
                            "name": "data",
                            "type": "WeatherResponse",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 213,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nHandle successful weather data response\n",
                    "description": "<p>Handle successful weather data response</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "data",
                            "type": "WeatherResponse",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadWeather",
                    "args": [
                        {
                            "name": "city",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 197,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nLoad weather data from API\n",
                    "description": "<p>Load weather data from API</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "city",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 130,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "refreshWeather",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 177,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRefresh current weather data\n",
                    "description": "<p>Refresh current weather data</p>\n"
                },
                {
                    "name": "retry",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 186,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRetry after error\n",
                    "description": "<p>Retry after error</p>\n"
                },
                {
                    "name": "searchWeather",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 144,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSearch weather by city name\n",
                    "description": "<p>Search weather by city name</p>\n"
                },
                {
                    "name": "updateCurrentDate",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 238,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nUpdate current date display\n",
                    "description": "<p>Update current date display</p>\n",
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { CommonModule } from '@angular/common';\nimport { Component, Input, OnInit, inject } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { WeatherService, WeatherResponse } from './weather.service';\n\nexport interface WeatherData {\n  location: string;\n  temperature: number;\n  condition: string;\n  humidity: number;\n  windSpeed: number;\n  icon: string;\n}\n\n@Component({\n  selector: 'weather-widget',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  providers: [WeatherService],\n  template: `\n    <div class=\"weather-widget\" [ngClass]=\"themeClass\">\n      <!-- Search Bar -->\n      <div class=\"weather-search\" *ngIf=\"enableSearch\">\n        <input\n          type=\"text\"\n          [(ngModel)]=\"searchCity\"\n          (keyup.enter)=\"searchWeather()\"\n          placeholder=\"Enter city name...\"\n          class=\"search-input\"\n        />\n        <button (click)=\"searchWeather()\" class=\"search-button\">üîç</button>\n        <button (click)=\"getCurrentLocationWeather()\" class=\"location-button\" title=\"Use my location\">üìç</button>\n      </div>\n\n      <!-- Loading State -->\n      <div *ngIf=\"loading\" class=\"weather-loading\">\n        <div class=\"spinner\"></div>\n        <p>Loading weather data...</p>\n      </div>\n\n      <!-- Error State -->\n      <div *ngIf=\"error && !loading\" class=\"weather-error\">\n        <span class=\"error-icon\">‚ö†Ô∏è</span>\n        <p>{{ error }}</p>\n        <button (click)=\"retry()\" class=\"retry-button\">Try Again</button>\n      </div>\n\n      <!-- Weather Content -->\n      <div *ngIf=\"!loading && !error\" class=\"weather-content\">\n        <div class=\"weather-header\">\n          <h2 class=\"location\">{{ weatherData.location }}</h2>\n          <span class=\"date\">{{ currentDate }}</span>\n        </div>\n\n        <div class=\"weather-main\">\n          <div class=\"weather-icon\">{{ weatherData.icon }}</div>\n          <div class=\"temperature\">{{ weatherData.temperature }}¬∞{{ unit }}</div>\n        </div>\n\n        <div class=\"weather-condition\">{{ weatherData.condition }}</div>\n\n        <div class=\"weather-details\">\n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Humidity</span>\n            <span class=\"detail-value\">{{ weatherData.humidity }}%</span>\n          </div>\n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Wind Speed</span>\n            <span class=\"detail-value\">{{ weatherData.windSpeed }} {{ windUnit }}</span>\n          </div>\n        </div>\n\n        <!-- Refresh Button -->\n        <button *ngIf=\"enableSearch\" (click)=\"refreshWeather()\" class=\"refresh-button\" title=\"Refresh\">\n          üîÑ\n        </button>\n      </div>\n    </div>\n  `,\n  styleUrls: ['./weather-widget.css'],\n})\nexport class WeatherWidgetComponent implements OnInit {\n  private weatherService = inject(WeatherService);\n\n  /** Enable search functionality */\n  @Input()\n  enableSearch: boolean = false;\n\n  /** Initial city to load */\n  @Input()\n  initialCity: string = 'The Hague';\n\n  /** Use real API data (if false, uses mock data) */\n  @Input()\n  useRealData: boolean = false;\n\n  /** Weather data to display */\n  @Input()\n  weatherData: WeatherData = {\n    location: 'The Hague',\n    temperature: 5,\n    condition: 'Partly Cloudy',\n    humidity: 65,\n    windSpeed: 12,\n    icon: '‚õÖ',\n  };\n\n  /** Temperature unit (C or F) */\n  @Input()\n  unit: 'C' | 'F' = 'F';\n\n  /** Wind speed unit */\n  @Input()\n  windUnit: 'mph' | 'km/h' = 'km/h';\n\n  /** Theme of the widget */\n  @Input()\n  theme: 'light' | 'dark' | 'gradient' = 'light';\n\n  /** Widget size */\n  @Input()\n  size: 'small' | 'medium' | 'large' = 'medium';\n\n  currentDate: string = '';\n  searchCity: string = '';\n  loading: boolean = false;\n  error: string = '';\n  lastSearchedCity: string = '';\n\n  ngOnInit() {\n    this.updateCurrentDate();\n    this.searchCity = this.initialCity;\n    this.lastSearchedCity = this.initialCity;\n\n    // Load weather data if real API is enabled\n    if (this.useRealData && this.enableSearch) {\n      this.loadWeather(this.initialCity);\n    }\n  }\n\n  /**\n   * Search weather by city name\n   */\n  searchWeather() {\n    if (!this.searchCity.trim()) {\n      this.error = 'Please enter a city name';\n      return;\n    }\n    this.loadWeather(this.searchCity.trim());\n  }\n\n  /**\n   * Get weather for current location using geolocation\n   */\n  async getCurrentLocationWeather() {\n    this.loading = true;\n    this.error = '';\n\n    try {\n      const coords = await this.weatherService.getCurrentPosition();\n      const units = this.unit === 'C' ? 'metric' : 'imperial';\n\n      this.weatherService.getWeatherByCoordinates(coords.latitude, coords.longitude, units)\n        .subscribe({\n          next: (data) => this.handleWeatherData(data),\n          error: (err) => this.handleError(err)\n        });\n    } catch (err: any) {\n      this.loading = false;\n      this.error = err.message || 'Unable to get your location';\n    }\n  }\n\n  /**\n   * Refresh current weather data\n   */\n  refreshWeather() {\n    if (this.lastSearchedCity) {\n      this.loadWeather(this.lastSearchedCity);\n    }\n  }\n\n  /**\n   * Retry after error\n   */\n  retry() {\n    if (this.lastSearchedCity) {\n      this.loadWeather(this.lastSearchedCity);\n    } else {\n      this.error = '';\n    }\n  }\n\n  /**\n   * Load weather data from API\n   */\n  private loadWeather(city: string) {\n    this.loading = true;\n    this.error = '';\n    this.lastSearchedCity = city;\n\n    const units = this.unit === 'C' ? 'metric' : 'imperial';\n\n    this.weatherService.getWeatherByCity(city, units).subscribe({\n      next: (data) => this.handleWeatherData(data),\n      error: (err) => this.handleError(err)\n    });\n  }\n\n  /**\n   * Handle successful weather data response\n   */\n  private handleWeatherData(data: WeatherResponse) {\n    this.weatherData = {\n      location: data.location,\n      temperature: data.temperature,\n      condition: data.condition,\n      humidity: data.humidity,\n      windSpeed: data.windSpeed,\n      icon: data.icon\n    };\n    this.loading = false;\n    this.error = '';\n  }\n\n  /**\n   * Handle API errors\n   */\n  private handleError(err: any) {\n    this.loading = false;\n    this.error = err.message || 'Failed to load weather data';\n    console.error('Weather widget error:', err);\n  }\n\n  /**\n   * Update current date display\n   */\n  private updateCurrentDate() {\n    this.currentDate = new Date().toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  }\n\n  get themeClass(): string {\n    return `weather-widget--${this.theme} weather-widget--${this.size}`;\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".weather-widget {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  border-radius: 20px;\n  padding: 2rem;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n  max-width: 400px;\n  width: 100%;\n  position: relative;\n}\n\n.weather-widget:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);\n}\n\n/* Search Bar */\n.weather-search {\n  display: flex;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n\n.search-input {\n  flex: 1;\n  padding: 0.75rem 1rem;\n  border: none;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.9);\n  color: #333;\n  font-size: 0.95em;\n  outline: none;\n  transition: all 0.3s ease;\n}\n\n.search-input::placeholder {\n  color: #999;\n}\n\n.search-input:focus {\n  background: rgba(255, 255, 255, 1);\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);\n}\n\n.weather-widget--dark .search-input {\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n}\n\n.weather-widget--dark .search-input::placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.weather-widget--dark .search-input:focus {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.search-button,\n.location-button,\n.refresh-button,\n.retry-button {\n  padding: 0.75rem 1rem;\n  border: none;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.9);\n  cursor: pointer;\n  font-size: 1.1em;\n  transition: all 0.3s ease;\n  outline: none;\n}\n\n.search-button:hover,\n.location-button:hover,\n.refresh-button:hover,\n.retry-button:hover {\n  background: rgba(255, 255, 255, 1);\n  transform: scale(1.05);\n}\n\n.search-button:active,\n.location-button:active,\n.refresh-button:active,\n.retry-button:active {\n  transform: scale(0.95);\n}\n\n.weather-widget--dark .search-button,\n.weather-widget--dark .location-button,\n.weather-widget--dark .refresh-button {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n.weather-widget--dark .search-button:hover,\n.weather-widget--dark .location-button:hover,\n.weather-widget--dark .refresh-button:hover {\n  background: rgba(255, 255, 255, 0.25);\n}\n\n.refresh-button {\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  padding: 0.5rem;\n  font-size: 1.2em;\n}\n\n/* Loading State */\n.weather-loading {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  padding: 3rem 0;\n  color: white;\n}\n\n.spinner {\n  width: 50px;\n  height: 50px;\n  border: 4px solid rgba(255, 255, 255, 0.3);\n  border-top-color: white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.weather-loading p {\n  font-size: 1.1em;\n  opacity: 0.9;\n}\n\n/* Error State */\n.weather-error {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  padding: 2rem 0;\n  color: white;\n  text-align: center;\n}\n\n.error-icon {\n  font-size: 3em;\n}\n\n.weather-error p {\n  font-size: 1.1em;\n  opacity: 0.9;\n  margin: 0;\n}\n\n.retry-button {\n  margin-top: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  font-size: 1em;\n  font-weight: 600;\n  color: #333;\n}\n\n/* Weather Content */\n.weather-content {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n/* Themes */\n.weather-widget--light {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n}\n\n.weather-widget--dark {\n  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);\n  color: #f0f0f0;\n}\n\n.weather-widget--gradient {\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n  color: white;\n}\n\n/* Sizes */\n.weather-widget--small {\n  padding: 1rem;\n  gap: 1rem;\n  max-width: 280px;\n  font-size: 0.875rem;\n}\n\n.weather-widget--medium {\n  padding: 2rem;\n  gap: 1.5rem;\n  max-width: 400px;\n  font-size: 1rem;\n}\n\n.weather-widget--large {\n  padding: 2.5rem;\n  gap: 2rem;\n  max-width: 500px;\n  font-size: 1.125rem;\n}\n\n/* Header */\n.weather-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  padding-bottom: 1rem;\n}\n\n.location {\n  margin: 0;\n  font-size: 1.5em;\n  font-weight: 600;\n}\n\n.date {\n  font-size: 0.75em;\n  opacity: 0.8;\n}\n\n.weather-widget--small .location {\n  font-size: 1.25em;\n}\n\n.weather-widget--large .location {\n  font-size: 1.75em;\n}\n\n/* Main weather display */\n.weather-main {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n}\n\n.weather-icon {\n  font-size: 5em;\n  line-height: 1;\n}\n\n.weather-widget--small .weather-icon {\n  font-size: 3.5em;\n}\n\n.weather-widget--large .weather-icon {\n  font-size: 6em;\n}\n\n.temperature {\n  font-size: 4em;\n  font-weight: 700;\n  line-height: 1;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.weather-widget--small .temperature {\n  font-size: 2.5em;\n}\n\n.weather-widget--large .temperature {\n  font-size: 5em;\n}\n\n/* Condition */\n.weather-condition {\n  text-align: center;\n  font-size: 1.25em;\n  font-weight: 500;\n  opacity: 0.9;\n}\n\n/* Details */\n.weather-details {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.detail-item {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  text-align: center;\n}\n\n.detail-label {\n  font-size: 0.875em;\n  opacity: 0.8;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.detail-value {\n  font-size: 1.25em;\n  font-weight: 600;\n}\n\n/* Dark theme specific adjustments */\n.weather-widget--dark .weather-header,\n.weather-widget--dark .weather-details {\n  border-color: rgba(240, 240, 240, 0.2);\n}\n\n/* Responsive adjustments */\n@media (max-width: 480px) {\n  .weather-widget {\n    max-width: 100%;\n  }\n}\n",
                    "styleUrl": "./weather-widget.css"
                }
            ],
            "stylesData": "",
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "accessors": {
                "themeClass": {
                    "name": "themeClass",
                    "getSignature": {
                        "name": "themeClass",
                        "type": "string",
                        "returnType": "string",
                        "line": 247
                    }
                }
            }
        }
    ],
    "modules": [],
    "miscellaneous": {
        "variables": [
            {
                "name": "appConfig",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/app.config.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "ApplicationConfig",
                "defaultValue": "{\n  providers: [\n    provideBrowserGlobalErrorListeners(),\n    provideRouter(routes),\n    provideHttpClient()\n  ]\n}"
            },
            {
                "name": "environment",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/environments/environment.prod.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "object",
                "defaultValue": "{\n  production: true,\n\n  // OpenWeatherMap API Configuration\n  weatherApi: {\n    key: '9a755e38ff059806bf283e3174fdeae7', // Replace with your API key\n    baseUrl: 'https://api.openweathermap.org/data/2.5',\n  },\n\n  // For production, consider setting up a backend proxy\n  // to hide your API key and avoid CORS issues\n  corsProxy: 'https://api.allorigins.win/raw?url=',\n\n  useProxy: false,\n}"
            },
            {
                "name": "environment",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/environments/environment.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "object",
                "defaultValue": "{\n  production: false,\n\n  // OpenWeatherMap API Configuration\n  // Get your free API key at: https://openweathermap.org/api\n  weatherApi: {\n    key: '9a755e38ff059806bf283e3174fdeae7', // Replace with your API key\n    baseUrl: 'https://api.openweathermap.org/data/2.5',\n  },\n\n  // CORS Proxy Configuration\n  // Options:\n  // 1. https://api.allorigins.win/raw?url= (free, no auth required)\n  // 2. https://corsproxy.io/? (free, no auth required)\n  // 3. Deploy your own: https://github.com/Rob--W/cors-anywhere\n  corsProxy: 'https://api.allorigins.win/raw?url=',\n\n  // Alternative: Use Angular proxy configuration (recommended for development)\n  // See proxy.conf.json\n  useProxy: false,\n}"
            },
            {
                "name": "routes",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/app.routes.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "Routes",
                "defaultValue": "[]"
            }
        ],
        "functions": [],
        "typealiases": [],
        "enumerations": [],
        "groupedVariables": {
            "src/app/app.config.ts": [
                {
                    "name": "appConfig",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/app.config.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ApplicationConfig",
                    "defaultValue": "{\n  providers: [\n    provideBrowserGlobalErrorListeners(),\n    provideRouter(routes),\n    provideHttpClient()\n  ]\n}"
                }
            ],
            "src/environments/environment.prod.ts": [
                {
                    "name": "environment",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/environments/environment.prod.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "object",
                    "defaultValue": "{\n  production: true,\n\n  // OpenWeatherMap API Configuration\n  weatherApi: {\n    key: '9a755e38ff059806bf283e3174fdeae7', // Replace with your API key\n    baseUrl: 'https://api.openweathermap.org/data/2.5',\n  },\n\n  // For production, consider setting up a backend proxy\n  // to hide your API key and avoid CORS issues\n  corsProxy: 'https://api.allorigins.win/raw?url=',\n\n  useProxy: false,\n}"
                }
            ],
            "src/environments/environment.ts": [
                {
                    "name": "environment",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/environments/environment.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "object",
                    "defaultValue": "{\n  production: false,\n\n  // OpenWeatherMap API Configuration\n  // Get your free API key at: https://openweathermap.org/api\n  weatherApi: {\n    key: '9a755e38ff059806bf283e3174fdeae7', // Replace with your API key\n    baseUrl: 'https://api.openweathermap.org/data/2.5',\n  },\n\n  // CORS Proxy Configuration\n  // Options:\n  // 1. https://api.allorigins.win/raw?url= (free, no auth required)\n  // 2. https://corsproxy.io/? (free, no auth required)\n  // 3. Deploy your own: https://github.com/Rob--W/cors-anywhere\n  corsProxy: 'https://api.allorigins.win/raw?url=',\n\n  // Alternative: Use Angular proxy configuration (recommended for development)\n  // See proxy.conf.json\n  useProxy: false,\n}"
                }
            ],
            "src/app/app.routes.ts": [
                {
                    "name": "routes",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/app.routes.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Routes",
                    "defaultValue": "[]"
                }
            ]
        },
        "groupedFunctions": {},
        "groupedEnumerations": {},
        "groupedTypeAliases": {}
    },
    "routes": {
        "name": "<root>",
        "kind": "module",
        "children": []
    },
    "coverage": {
        "count": 14,
        "status": "low",
        "files": [
            {
                "filePath": "src/app/app.config.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "appConfig",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/app.routes.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "routes",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/app.ts",
                "type": "component",
                "linktype": "component",
                "name": "App",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/environments/environment.prod.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "environment",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/environments/environment.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "environment",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/stories/button/button.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ButtonComponent",
                "coveragePercent": 83,
                "coverageCount": "5/6",
                "status": "very-good"
            },
            {
                "filePath": "src/stories/header/header.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "HeaderComponent",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/stories/header/user.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "User",
                "coveragePercent": 0,
                "coverageCount": "0/2",
                "status": "low"
            },
            {
                "filePath": "src/stories/page/page.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "PageComponent",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/stories/weather-widget/weather-widget.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "WeatherWidgetComponent",
                "coveragePercent": 66,
                "coverageCount": "16/24",
                "status": "good"
            },
            {
                "filePath": "src/stories/weather-widget/weather-widget.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "WeatherData",
                "coveragePercent": 0,
                "coverageCount": "0/7",
                "status": "low"
            },
            {
                "filePath": "src/stories/weather-widget/weather.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "WeatherService",
                "coveragePercent": 50,
                "coverageCount": "9/18",
                "status": "medium"
            },
            {
                "filePath": "src/stories/weather-widget/weather.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "DailyForecast",
                "coveragePercent": 0,
                "coverageCount": "0/7",
                "status": "low"
            },
            {
                "filePath": "src/stories/weather-widget/weather.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "WeatherResponse",
                "coveragePercent": 0,
                "coverageCount": "0/14",
                "status": "low"
            }
        ]
    }
}